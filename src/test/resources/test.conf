include "application"

changestream {
  mysql {
    timeout = 15000 #ms
    preload {
      timeout = 15000 #ms
      databases = "changestream_test" #comma separated
    }
  }

  encryptor.timeout = 15000 #ms

  aws {
    timeout = 15000 #ms
    sqs.queue = "__integration_tests"
    sns.topic = "__integration_tests"
  }
}

akka {
  loggers = ["akka.testkit.TestEventListener"]

  persistence.snapshot-store.plugin = "akka.persistence.snapshot-store.local"
  persistence.snapshot-store.local.dir = "target/snapshots"

  actor {
    debug {
      lifecycle = on
      unhandled = on
      receive = on
    }
  }
}

inmem-journal {
  class = "changestream.persistence.InmemJournal"
  plugin-dispatcher = "akka.actor.default-dispatcher"

  timeout = 5000
}

sns-journal-working {
  class = "changestream.persistence.SnsJournalPlugin"
  plugin-dispatcher = "akka.actor.default-dispatcher"

  timeout = 5000
}
sns-journal-broken {
  class = "changestream.persistence.SnsJournalPlugin"
  plugin-dispatcher = "akka.actor.default-dispatcher"

  timeout = 1
}

sqs-journal-working {
  class = "changestream.persistence.SqsJournalPlugin"
  plugin-dispatcher = "akka.actor.default-dispatcher"

  timeout = 5000
  batch-size = 10
}
sqs-journal-broken {
  class = "changestream.persistence.SqsJournalPlugin"
  plugin-dispatcher = "akka.actor.default-dispatcher"

  timeout = 1
  batch-size = 10
}

include "test.overrides"
